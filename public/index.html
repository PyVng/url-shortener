<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>URL Shortener - –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div id="header-container"></div>

        <main style="margin-top: 80px;">
            <div class="hero-section">
                <h1>üîó URL Shortener</h1>
                <p>–°–æ–∫—Ä–∞—Ç–∏—Ç–µ –¥–ª–∏–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ –∏ —É–¥–æ–±–Ω—ã–µ</p>
            </div>

            <div class="url-form-container">
                <form id="urlForm" class="url-form">
                    <div class="input-group">
                        <label for="originalUrl">–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω–Ω—ã–π URL:</label>
                        <input
                            type="url"
                            id="originalUrl"
                            name="originalUrl"
                            placeholder="https://example.com/very/long/url/that/needs/to/be/shortened"
                            required
                        >
                    </div>

                    <button type="submit" id="shortenBtn" class="btn btn-primary">
                        <span class="btn-text">–°–æ–∫—Ä–∞—Ç–∏—Ç—å URL</span>
                        <span class="btn-loading" style="display: none;">–°–æ–∫—Ä–∞—â–∞–µ–º...</span>
                    </button>
                </form>
            </div>

            <div id="result" class="result" style="display: none;">
                <div class="result-content">
                    <h3>‚úÖ URL —É—Å–ø–µ—à–Ω–æ —Å–æ–∫—Ä–∞—â–µ–Ω!</h3>
                    <div class="url-display">
                        <div class="original-url">
                            <strong>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL:</strong>
                            <span id="originalUrlDisplay"></span>
                        </div>
                        <div class="short-url">
                            <strong>–ö–æ—Ä–æ—Ç–∫–∏–π URL:</strong>
                            <div class="short-url-container">
                                <input type="text" id="shortUrlInput" readonly>
                                <button id="copyBtn" class="btn btn-secondary">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
                                <button id="goToBtn" class="btn btn-outline">–ü–µ—Ä–µ–π—Ç–∏</button>
                            </div>
                        </div>
                    </div>
                    <div class="actions">
                        <button id="createNewBtn" class="btn btn-outline">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π</button>
                    </div>
                </div>
            </div>

            <div id="error" class="error" style="display: none;">
                <div class="error-content">
                    <h3>‚ùå –û—à–∏–±–∫–∞</h3>
                    <p id="errorMessage"></p>
                    <button id="tryAgainBtn" class="btn btn-outline">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
                </div>
            </div>
        </main>

        <div id="footer-container"></div>
    </div>

    <script src="components.js"></script>
    <script>
        // Load Supabase dynamically to ensure it's available
        (function() {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js';
            script.onload = function() {
                // Dispatch custom event when Supabase is loaded
                window.dispatchEvent(new Event('supabaseLoaded'));
            };
            script.onerror = function() {
                console.error('Failed to load Supabase script');
            };
            document.head.appendChild(script);
        })();
    </script>
    <script src="app.js"></script>
</body>
</html>
